var DEVTEST=!1;function applyBeautyTips(){jQuery.bt.options.cssStyles={font:"12px sans-serif",fontFamily:"Verdana,Arial,sans-serif"},$(".save_descr").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#save_btn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".save_rsrch_data").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#save_rsrch_btn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".save_exact_mtch_id").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#save_btn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$("div.savedone").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#finish",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".instance_browser_ui").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#instnc_srch_scrn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".back_to_summary_vw").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#lgnd_summry_scrn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$("span.tophit").bt({positions:["bottom","left","top"],contentSelector:"$('#twoD_'+$(this).text()+'')",trigger:"hover",centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$("span.author_assgnd_id").bt({positions:["bottom","left","top"],contentSelector:"$('#'+$(this).text()+'_2d_auth_assgnd')",trigger:"hover",centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1,ajaxError:"There was a problem getting this content. Ligand ID may be invalid."}),$("textarea.capture_rsrch_data_input.target_seq").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#binding_target_seq",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("select.capture_rsrch_data_input.dscrptr_type").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_dscrptr_str",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.rsrch_dscrptr_str").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_dscrptr_str",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.ph").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_ph",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.temp").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_temp",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("select.capture_rsrch_data_input.measurement_type").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measurement_type",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.measured_value").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measured_value",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("textarea.capture_rsrch_data_input.details").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_details",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".target_sequence_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#binding_target_seq",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".rsrch_dscrptr_type_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_dscrptr_str",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".ph_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_ph",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".assay_temp_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_temp",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".measurement_type_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measurement_type",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".measured_value_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measured_value",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".details_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_details",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".head.rsrch_data").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_hdr",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1})}function closeWindow(){"Microsoft Internet Explorer"==navigator.appName?(this.focus(),self.opener=this,self.close()):(window.open("","_parent",""),window.close())}function unresolvedGrpsHandler(){var e=0;return $("#rslts td.resolve_status").each(function(){var t=$(this).html();"Mismatch(es) Require Attention"==t?(e+=1,$(this).removeClass("beenrslved")):"OK"!=t&&$(this).addClass("beenrslved")}),e}function getBrowserType(){$.browser.firefox=/firefox/.test(navigator.userAgent.toLowerCase()),$.browser.chrome=/chrom(e|ium)/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/trident/.test(navigator.userAgent.toLowerCase()),$.browser.chrome&&(ChemCompLiteMod.currBrowser="chrome"),$.browser.firefox&&(ChemCompLiteMod.currBrowser="firefox"),$.browser.msie&&(ChemCompLiteMod.currBrowser="msie")}function getLigSummaryRslts(){return $(ChemCompLiteMod.loadSmmryFrmLctr).ajaxSubmit({url:ChemCompLiteMod.URL.GEN_LIG_SMMRY_RSLTS,async:!0,clearForm:!1,success:function(t){checkSummaryStatus(t,ChemCompLiteMod.URL.CHECK_FOR_SMMRY_DATA)}}),!1}function checkSummaryStatus(t,e){try{ChemCompLiteMod.dataAvail="no";var r=setInterval(function(){checkForRsltsData(t,e,3),"yes"==ChemCompLiteMod.dataAvail&&(clearInterval(r),$(ChemCompLiteMod.loadSmmryFrmLctr).ajaxSubmit({url:ChemCompLiteMod.URL.LOAD_LIG_SMMRY_DATA,async:!0,clearForm:!1,target:"#rslts",success:function(){$(".savedone").removeAttr("disabled"),applyBeautyTips(),unresolvedGrpsHandler(),updateSummarySelect(),$(".instance_browser_ui").removeAttr("disabled")},error:function(){$(".errmsg").html(errStyle+"Failed to load ligand summary data.<br />\n"+ChemCompLiteMod.adminContact).show()}}))},3e3)}catch(t){$(".errmsg").html(errStyle+"Error on checking for ligand summary data.<br />\n"+ChemCompLiteMod.adminContact).show().delay(5e3).slideUp(800)}}function loadSummaryData(){$(ChemCompLiteMod.loadSmmryFrmLctr).ajaxSubmit({url:ChemCompLiteMod.URL.LOAD_LIG_SMMRY_DATA,async:!0,clearForm:!1,target:"#rslts",success:function(){$(".savedone").removeAttr("disabled"),applyBeautyTips(),unresolvedGrpsHandler(),updateSummarySelect(),$(".instance_browser_ui").removeAttr("disabled")},error:function(){$(".errmsg").html(errStyle+"Failed to load ligand summary data.<br />\n"+ChemCompLiteMod.adminContact).show()}})}function updateSummarySelect(){0<$(".selectinstnc_td :checked").length?($(".selectinstnc_td").css("backgroundColor",""),0<$(".c_NONE_special .selectinstnc_td :checked").length?($("#ligand_inventory_tbl .selectinstnc_td .selectinst_stdgrp").attr("disabled","disabled"),$("#ligand_inventory_tbl .selectinstnc_td .selectinst_none").removeAttr("disabled")):($("#ligand_inventory_tbl .selectinstnc_td .selectinst_stdgrp").removeAttr("disabled"),protectRsrchDataHandler(),$("#ligand_inventory_tbl .selectinstnc_td .selectinst_none").attr("disabled","disabled"))):($(".selectinstnc_td").css("backgroundColor","#FFE6E6"),$("#ligand_inventory_tbl .selectinstnc_td .selectinst_stdgrp").removeAttr("disabled"),protectRsrchDataHandler(),$("#ligand_inventory_tbl .selectinstnc_td .selectinst_none").removeAttr("disabled"))}function checkForRsltsData(t,e,r){var s;return $.ajax({type:"GET",url:e,async:!0,cache:!1,data:{semaphore:t.semaphore,sessionid:CC_LITE_SESSION_DATA.sessionID,delay:r},success:function(t){"completed"==(s=t.statuscode)&&(ChemCompLiteMod.dataAvail="yes")},error:function(t){alert("error on call to check for results data")}}),s}function checkMissingLigandTypeField(t){var e=!1;return $("#lgnd_type_"+t+" input[name='lgnd_type']:checked").val()||(e=!0),e?$("#fieldset_lgnd_type_"+t).css({"border-color":"#CD0A0A","background-color":"#FEF1EC","border-style":"solid","border-width":"1px"}):$("#fieldset_lgnd_type_"+t).css({"border-color":"#f6f6f5","background-color":"#FFF","border-style":"groove","border-width":"2px"}),e}function loadInstanceBrowserView(){ChemCompLiteMod.activeCCid=1,$("#ligand_summary_vw").hide(),$("#help_batch_smmry_vw").hide();var t=$("#mismatchlist").html();ChemCompLiteMod.ligIdsMismatched=t.split(",");var e=$("#rslvdlist").html();e&&(ChemCompLiteMod.ligIdsRslvd=e.split(","));var r=$("#ligids").val(),s=$("#ligids_inst_vw").val(),i=$("#ligids_rsrch").val(),a=$("#ligids_rsrch_inst_vw").val();if($("#instnc_browser_container").html().length<=150||s!=r||a!=i)return $("#instnc_browser_container").html('<div class="loading_msg">&nbsp;&nbsp;<img src="'+CC_LITE_SESSION_DATA.servicePathPrefix+'"/images/loading.gif" alt="loading..." />&nbsp;&nbsp;Data being processed.</div>'),$("#instnc_brwser_vw").show(),$("#ligids_inst_vw").val(r),$("#ligids_rsrch_inst_vw").val(i),$("#inst_brwsr_frm").ajaxSubmit({url:CC_LITE_SESSION_DATA.servicePathPrefix+"/service/cc_lite/report/instancelist",async:!0,clearForm:!1,beforeSubmit:function(t,e,r){t.push({name:"browser",value:ChemCompLiteMod.currBrowser})},target:"#instnc_browser_container",success:function(){$("#pagi").paginate({count:$(".tabscount").size(),start:ChemCompLiteMod.activeCCid,display:6,border:!0,border_color:"#BEF8B8",text_color:"#68BA64",background_color:"#E3F2E1",border_hover_color:"#68BA64",text_hover_color:"black",background_hover_color:"#CAE6C6",images:!1,mouse:"press",onChange:function(t){$("._current").removeClass("_current").slideUp("slow"),$("#p"+t).addClass("_current").slideDown("slow"),$("#p_"+t).addClass("_current").slideDown("slow"),$("#p__"+t).addClass("_current").slideDown("slow"),ChemCompLiteMod.activeCCid=t}}),$(".single_instance").hide();var t=$(".cmpnt_grp:first").html(),e=$(".inneraccordion .head."+t+"_hdr:not([class*=all_instances]):not([class*=rsrch_data])").first(),r=e.next().attr("id"),s=e.next().attr("name");r.length&&$("#"+s).html().length<100&&$("#"+s).load(r),$(".inneraccordion .head."+t+"_hdr:not([class*=all_instances]):not([class*=rsrch_data])").on("click",function(t){var e=$(this).next().attr("id"),r=$(this).next().attr("name");e.length&&$("#"+r).html().length<100&&$("#"+r).load(e)}),$(".inneraccordion").each(function(t){$(this).find(".single_instance:first").show(),$(this).find("span.ui-icon:first").toggleClass("ui-icon-circle-arrow-s ui-icon-circle-arrow-e")}),$(".inneraccordion div.all_instances").each(function(t){$(this).show(),$(this).parent().find("a.all_instances span.ui-icon").toggleClass("ui-icon-circle-arrow-s ui-icon-circle-arrow-e");var e=$(this).attr("name");checkMissingLigandTypeField(e),checkForUploadedImageFiles(e,"requirementscheck"),checkCompDefFileUploads(e,"refresh")}),$("#restart").click(function(){alert("[PLACEHOLDER] -- will perform restart action")}),$(".savedone").removeAttr("disabled"),$(".instance_browser_ui").removeAttr("disabled"),$(".back_to_summary_vw").removeAttr("disabled"),$(".back_to_summary_vw").show(),$(".instance_browser_ui").hide(),$(document).on("click",".back_to_summary_vw",function(){window.parent.$("div.ui-layout-center.ui-layout-pane.ui-layout-pane-center").animate({scrollTop:0},"slow"),$(".back_to_summary_vw").hide(),$(".instance_browser_ui").show(),$("#instnc_brwser_vw").hide(),$("#help_instnc_brwser_vw").hide(),unresolvedGrpsHandler(),$("#ligand_summary_vw").show(),$("#help_batch_smmry_vw").show(),protectRsrchDataHandler()}),applyBeautyTips(),disableCopyRsrchDscrptr()}}),$("ul.jPag-pages li").each(function(t){var e=$(this).text();0<=ChemCompLiteMod.ligIdsMismatched.indexOf(e)&&$(this).addClass("attn_reqd"),ChemCompLiteMod.ligIdsRslvd&&0<=ChemCompLiteMod.ligIdsRslvd.indexOf(e)&&($(this).addClass("is_rslvd"),$(this).removeClass("attn_reqd"))}),!1;$("#instnc_brwser_vw").show(),$(".back_to_summary_vw").show(),$(".instance_browser_ui").hide()}function disableCopyRsrchDscrptr(){$(".copy_rsrch_dscrptr_str").each(function(t){var e=$(this).attr("id").split("_")[5];ChemCompLiteMod.ligIdsMismatched&&ChemCompLiteMod.ligIdsMismatched.indexOf(e)<0&&ChemCompLiteMod.ligIdsRslvd&&ChemCompLiteMod.ligIdsRslvd.indexOf(e)<0&&$(this).attr("disabled","disabled")})}function protectRsrchDataHandler(){for(var t=0;t<ChemCompLiteMod.ligIdsWithRsrchSubmitted.length;t++){var e=ChemCompLiteMod.ligIdsWithRsrchSubmitted[t];$("#"+e+"_rsrch").attr("disabled","disabled")}for(t=0;t<ChemCompLiteMod.ligIdsMissingRsrch.length;t++){e=ChemCompLiteMod.ligIdsMissingRsrch[t];$("#"+e+"_rsrch").removeAttr("disabled")}}function disableRsrchDataCntrls(t,e){$(".capture_rsrch_data_input.c_"+t).each(function(){$(this).attr("disabled","disabled")}),revertColorRsrchDataSaveBtn(t)}function enableRsrchDataCntrls(t,e){$(".capture_rsrch_data_input.c_"+t).each(function(){$(this).removeAttr("disabled")}),disableCopyRsrchDscrptr()}function checkForValidInput(t,e,r){var s=!1;return t&&0<t.length&&(s=t.trim().match(ChemCompLiteMod.inputTypeValidation[e])),s||"notify"!==r||alert("Invalid "+ChemCompLiteMod.inputTypeValidation.displaytext[e]+" entered. Please correct."),s}function enableRsrchDataSaveBtn(t){$(".capture_rsrch_data_submit_"+t).removeAttr("disabled"),highlightColorRsrchDataSaveBtn(t)}function revertColorRsrchDataSaveBtn(t){$(".capture_rsrch_data_submit_"+t).css("color","")}function highlightColorRsrchDataSaveBtn(t){$(".capture_rsrch_data_submit_"+t).css("color","red")}function updateResearchList(t,s){$("#hlprfrm_auth_assgnd_grp").val(t),$("#hlprfrm").ajaxSubmit({url:ChemCompLiteMod.URL.UPDATE_RSRCHLST,clearForm:!1,beforeSubmit:function(t,e,r){t.push({name:"mode",value:s})},success:function(){$("#hlprfrm_auth_assgnd_grp").val("")}})}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var r=e||0,s=this.length;r<s;r++)if(this[r]===t)return r;return-1}),String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)}),loadSummaryData(),$(document).on("click","input.savedone",function(){var i=0;if("deposit"==CC_LITE_SESSION_DATA.fileSource.toLowerCase())$("#hlprfrm").ajaxSubmit({url:ChemCompLiteMod.URL.EXIT_FINISHED,clearForm:!1,beforeSubmit:function(t,e,r){i=unresolvedGrpsHandler();var s=0<$(".selectinstnc_td :checked").length;return 0<i?(alert("Ligand processing cannot be completed because one or more ligands require attention. Please address any outstanding mismatches."),!1):s?void t.push({name:"sessionid",value:CC_LITE_SESSION_DATA.sessionID}):($(".instance_browser_ui").is(":visible")?alert("Ligand processing cannot be completed as 'Focus of Research' has not been specified from this page."):alert("Ligand processing cannot be completed as 'Focus of Research' has not been specified from summary page. Please press the 'Back to Summary View' button to return to summary page to correct this."),!1)},success:function(){alert("Work will be saved and ligand processing now complete."),DEVTEST?$("html").html('TESTING: you can inspect result files/uploads <a href="'+CC_LITE_SESSION_DATA.servicePathPrefix+"/sessions/"+CC_LITE_SESSION_DATA.sessionID+'/results.html">here</a>'):(closeWindow(),$("html").html(""))}});else{if(0<(i=unresolvedGrpsHandler()))return alert("Ligand processing cannot be completed because one or more ligands require attention. Please address any outstanding mismatches."),!1;alert("Save (Done)"),checkval=0,closeWindow(),$("html").html("")}}),$(document).on("click",".instance_browser_ui",function(){var t,e,r="",s="";$("#ligand_summary_vw :checkbox:checked:not(#selectall):not(.selectinstnc_rsrch):not(#selectall_rsrch)").each(function(){t=$(this).attr("name"),r+=(0<r.length?",":"")+t,ChemCompLiteMod.ligIdsSlctdForInstcVw.indexOf(t)<0&&ChemCompLiteMod.ligIdsSlctdForInstcVw.push(t)}),$("#ligand_summary_vw :checkbox:checked:not(#selectall):not(.selectinstnc):not(#selectall_rsrch)").each(function(){e=$(this).attr("name").split("_")[0],s+=(0<s.length?",":"")+e}),$("#ligids").val(r),$("#ligids_rsrch").val(s),0<ChemCompLiteMod.ligIdsSlctdForInstcVw.length?($("#help_instnc_brwser_vw").show(),document.title=CC_LITE_SESSION_DATA.depId+" : Instance Browser View",loadInstanceBrowserView()):alert("Please select at least one entry to submit to Instance Browser View.")}),window.onbeforeunload=function(t){0},$(document).on("click","#selectall",function(){$(this).parents("div:eq(0)").find(".selectinstnc").prop("checked",this.checked),this.checked||(ChemCompLiteMod.ligIdsSlctdForInstcVw.length=0)}),$(document).on("click",".selectinstnc",function(){var t=$(this).attr("name");if(!this.checked){$("#selectall").prop("checked",this.checked);var e=ChemCompLiteMod.ligIdsSlctdForInstcVw.indexOf(t);0<=e&&ChemCompLiteMod.ligIdsSlctdForInstcVw.splice(e,1)}}),$(document).on("click","#selectall_rsrch",function(){var t=this.checked,e="";t?($(this).parents("div:eq(0)").find(".selectinstnc_rsrch").prop("checked",this.checked),$("#ligand_summary_vw :checkbox:checked:not(#selectall):not(.selectinstnc):not(#selectall_rsrch)").each(function(t){thisLigIdRsrch=$(this).attr("name").split("_")[0],e+=(0<t?",":"")+thisLigIdRsrch}),updateResearchList(e,"add")):($(this).parents("div:eq(0)").find(".selectinstnc_rsrch:enabled").prop("checked",this.checked),$("#ligand_summary_vw :checkbox:not(:checked):not(#selectall):not(.selectinstnc):not(#selectall_rsrch)").each(function(t){thisLigIdRsrch=$(this).attr("name").split("_")[0],e+=(0<t?",":"")+thisLigIdRsrch}),updateResearchList(e,"remove")),updateSummarySelect()}),$(document).on("click",".selectinstnc_rsrch",function(){var t=$(this).attr("name").split("_")[0];this.checked?updateResearchList(t,"add"):($("#selectall_rsrch").attr("checked",this.checked),updateResearchList(t,"remove")),updateSummarySelect()}),$(document).on("click",".addanother_rsrch",function(t){var e=$(this).attr("id").split("_"),r=e[3],s=e[2],i="#rsrch_data_set_"+s+"_"+parseInt(r)+"_",a=$(i).clone().html().replaceAll("_"+parseInt(r)+"_","_"+(parseInt(r)+1)+"_");a=(a="HOH"==s?a.replaceAll("Site - "+(parseInt(r)+1),"Site - "+(parseInt(r)+2)):a.replaceAll("Assay Data - "+(parseInt(r)+1),"Assay Data - "+(parseInt(r)+2))).replaceAll("displaynone","");var n="rsrch_data_set_"+s+"_"+(parseInt(r)+1)+"_";$(i).after('<div id="'+n+'" class="rsrch_data_set" >'),$("#"+n).append(a),$("#"+n+' input:not([type="button"])').val(""),$("#"+n+" select").val(""),$("#"+n+" textarea").val(""),$("#"+n+" .disabled_2").attr("disabled","disabled"),$("#"+n+" .disabled_3").attr("disabled","disabled"),$("#"+n+" .disabled_4").attr("disabled","disabled"),$("#binding_dataset_actions_"+s+"_"+parseInt(r)+"_").hide(),3==parseInt(r)&&$("#addanother_rsrch_"+s+"_"+(parseInt(r)+1)+"_").hide(),applyBeautyTips()}),$(document).on("click",".deletethis_rsrch",function(t){var e=$(this).attr("id").split("_"),r=e[3],s=e[2],i="#rsrch_data_set_"+s+"_"+parseInt(r)+"_";$(i).remove(),$("#binding_dataset_actions_"+s+"_"+(parseInt(r)-1)+"_").show(),1<r&&$("#deletethis_rsrch_"+s+"_"+(parseInt(r)-1)+"_").show()}),$(document).on("click",".copy_rsrch_dscrptr_str",function(t){var e=$(this).attr("id").split("_"),r=e[6],s=e[5],i=!0,a=$("#dscrptr_type_"+s).val(),n=$("#dscrptr_str_"+s).val().trim();if(0==n.length&&(alert("Descriptor string not provided in Ligand Verification section."),i=!1),i){var o="#rsrch_dscrptr_type_"+s+"_"+parseInt(r)+"_",c="#rsrch_dscrptr_str_"+s+"_"+parseInt(r)+"_";$(o).val(a),$(c).val(n),$(c).removeAttr("disabled")}}),$(document).on("change",".capture_rsrch_data_input.assay_type",function(t){var e=$(this).val().trim(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-3],a=s[s.length-2];r.split("_"+i+"_"+a+"_")[0];e&&0<e.length&&$("#rsrch_data_set_"+i+"_"+a+"_ .disabled_2").removeAttr("disabled")}),$(document).on("change",".capture_rsrch_data_input.dscrptr_type",function(t){var e=$(this).val().trim(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-3],a=s[s.length-2];r.split("_"+i+"_"+a+"_")[0];if(e&&1<e.length){$("#rsrch_dscrptr_str_"+i+"_"+a+"_").removeAttr("disabled"),$("#"+r+" option:eq(0)").attr("disabled","disabled");var n=$("#rsrch_dscrptr_str_"+i+"_"+a+"_").val().trim();if(n&&0<n.length)checkForValidInput(n,e,"notify")}}),$(document).on("change",".capture_rsrch_data_input.measurement_type",function(t){var e=$(this).val().trim(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-3],a=s[s.length-2];r.split("_"+i+"_"+a+"_")[0];if(e&&1<e.length){$("#measured_value_"+i+"_"+a+"_").removeAttr("disabled"),$("#"+r+" option:eq(0)").attr("disabled","disabled");var n=$("#measured_value_"+i+"_"+a+"_").val().trim();if(n&&0<n.length)checkForValidInput(n,"measured_value","notify")}}),$(document).on("keyup",".capture_rsrch_data_input.measured_value",function(t){var e=$(this).val().trim(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-3],a=s[s.length-2];r.split("_"+i+"_"+a+"_")[0];e&&0<e.length&&($("#rsrch_data_set_"+i+"_"+a+"_ .disabled_3").removeAttr("disabled"),disableCopyRsrchDscrptr())}),$(document).on("blur",'.capture_rsrch_data_input:not(.rsrch_dscrptr_str):not([type="button"])',function(t){var e=$(this).val().trim(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-3],a=s[s.length-2],n=r.split("_"+i+"_"+a+"_")[0];e&&0<e.length?checkForValidInput(e,n,"notify")&&enableRsrchDataSaveBtn(i):"measured_value"==n&&$("#measurement_type_"+i+"_"+a+"_ option:eq(0)").removeAttr("disabled")}),$(document).on("blur",".capture_rsrch_data_input.rsrch_dscrptr_str",function(t){var e=$(this).val().trim(),r=$(this).attr("id").split("_"),s=r[3],i=r[4],a=$("#rsrch_dscrptr_type_"+s+"_"+i+"_").val();e&&0<e.length?checkForValidInput(e,a,"notify")&&enableRsrchDataSaveBtn(s):$("#rsrch_dscrptr_type_"+s+"_"+i+"_ option:eq(0)").removeAttr("disabled")}),$(document).on("click",".save_rsrch_data",function(){var t=$(this).attr("value"),n=($(this),$(this).attr("name")),e="span.datasubmitted_status."+n,r="span.no_datasubmitted_status."+n,s="#capture_rsrch_data_frm_"+n;if(0<=t.indexOf("Save")){var i=!0,a="HOH"!=n?':not([type="button"])':'[type="text"]',o=new Object;for(index in $(".c_"+n+".capture_rsrch_data_input"+a).each(function(t){var e=$(this).val(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-2],a=r.split("_"+n+"_"+i+"_")[0];o.hasOwnProperty(i)||(o[i]=new Object,o[i].notEmpty=!1,o[i].validData=!0,"HOH"!=n&&(o[i].countOfEmptyMeasurementGrpItems=0,o[i].dscrptrMissing=!1,o[i].dscrptrTypeMissing=!1,o[i].haveAssayType=!0)),e&&1<=e.trim().length&&e!==n?o[i].notEmpty=!0:"assay_type"==a&&(o[i].haveAssayType=!1)}),"HOH"!=n&&$(".c_"+n+".capture_rsrch_data_input.measurement_grp").each(function(t){var e=$(this).val(),r=$(this).attr("id").split("_"),s=r[r.length-2];e&&1<=e.length||(o[s].countOfEmptyMeasurementGrpItems+=1)}),$(".c_"+n+'.capture_rsrch_data_input:not(.rsrch_dscrptr_str):not([type="button"]):not(select)').each(function(t){var e=$(this).val(),r=$(this).attr("id"),s=r.split("_"),i=s[s.length-3],a=s[s.length-2],n=r.split("_"+i+"_"+a+"_")[0];e&&0<e.trim().length&&(checkForValidInput(e,n,"onglobalsave")||(o[a].validData=!1))}),$(".c_"+n+".capture_rsrch_data_input.rsrch_dscrptr_str").each(function(t){var e=$(this).val().trim(),r=$(this).attr("id").split("_"),s=r[3],i=r[4],a=$("#rsrch_dscrptr_type_"+s+"_"+i+"_").val();e&&0<e.length?a?checkForValidInput(e,a,"onglobalsave")||(o[i].validData=!1):o[i].dscrptrTypeMissing=!0:a&&0<a.length&&(o[i].dscrptrMissing=!0)}),o)o[index].notEmpty?"HOH"==n||o[index].haveAssayType||(i=!1,alert("Cannot submit dataset without specifying the assay type. Please check content in dataset #"+(parseInt(index)+1))):(i=!1,alert("Cannot submit an empty dataset. Please check content in dataset #"+(parseInt(index)+1))),i&&(o[index].validData||(i=!1,alert("Still have input that requires correction. Please check dataset #"+(parseInt(index)+1)))),i&&"HOH"!=n&&(0<o[index].countOfEmptyMeasurementGrpItems&&(i=!1,alert("Measurement type and measured value must both be provided. Please check dataset #"+(parseInt(index)+1))),o[index].dscrptrMissing&&(i=!1,alert("Descriptor type is specified but corresponding string is missing. Please check dataset #"+(parseInt(index)+1))),o[index].dscrptrTypeMissing&&(i=!1,alert("Descriptor string is provided but corresponding descriptor type is missing. Please check dataset #"+(parseInt(index)+1))));!1,i&&($("#rsrch_mode_"+n).val("done"),"HOH"!=n?($("#"+n+"_capture_rsrch_data .save_rsrch_data").val("Edit Ligand Binding Data"),$(e).show(),$(r).hide()):$("#"+n+"_capture_rsrch_data .save_rsrch_data").val("Edit"),$(s).ajaxSubmit({url:ChemCompLiteMod.URL.SAVE_RSRCH_DATA,async:!0,clearForm:!1,success:function(){disableRsrchDataCntrls(n,"done"),applyRsrchAcqdStatusHighlight(n),ChemCompLiteMod.ligIdsWithRsrchSubmitted.push(n);var t=ChemCompLiteMod.ligIdsMissingRsrch.indexOf(n);0<=t&&ChemCompLiteMod.ligIdsMissingRsrch.splice(t,1),protectRsrchDataHandler()}}))}else $("#rsrch_mode_"+n).val("undo"),$(e).hide(),$(r).show(),"HOH"!=n?$("#"+n+"_capture_rsrch_data .save_rsrch_data").val("Save Ligand Binding Data"):$("#"+n+"_capture_rsrch_data .save_rsrch_data").val("Save"),$(s).ajaxSubmit({url:ChemCompLiteMod.URL.SAVE_RSRCH_DATA,async:!0,clearForm:!1,success:function(){enableRsrchDataCntrls(n,"undo"),applyRsrchAcqdStatusHighlight(n),highlightColorRsrchDataSaveBtn(n),ChemCompLiteMod.ligIdsMissingRsrch.push(n);var t=ChemCompLiteMod.ligIdsWithRsrchSubmitted.indexOf(n);0<=t&&ChemCompLiteMod.ligIdsWithRsrchSubmitted.splice(t,1),protectRsrchDataHandler()}})});