function applyBeautyTips(){jQuery.bt.options.cssStyles={font:"12px sans-serif",fontFamily:"Verdana,Arial,sans-serif"},$(".save_descr").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#save_btn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".save_rsrch_data").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#save_rsrch_btn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".save_exact_mtch_id").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#save_btn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$("div.savedone").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#finish",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".instance_browser_ui").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#instnc_srch_scrn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$(".back_to_summary_vw").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#lgnd_summry_scrn",ajaxOpts:{dataType:"html"},trigger:"hover",width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$("span.tophit").bt({positions:["bottom","left","top"],contentSelector:"$('#twoD_'+$(this).text()+'')",trigger:"hover",centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1}),$("span.author_assgnd_id").bt({positions:["bottom","left","top"],contentSelector:"$('#'+$(this).text()+'_2d_auth_assgnd')",trigger:"hover",centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",strokeStyle:"#ABABAB",strokeWidth:1,ajaxError:"There was a problem getting this content. Ligand ID may be invalid."}),$("textarea.capture_rsrch_data_input.target_seq").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#binding_target_seq",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("select.capture_rsrch_data_input.dscrptr_type").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_dscrptr_str",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.rsrch_dscrptr_str").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_dscrptr_str",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.ph").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_ph",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.temp").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_temp",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("select.capture_rsrch_data_input.measurement_type").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measurement_type",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("input.capture_rsrch_data_input.measured_value").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measured_value",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$("textarea.capture_rsrch_data_input.details").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_details",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".target_sequence_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#binding_target_seq",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".rsrch_dscrptr_type_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_dscrptr_str",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".ph_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_ph",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".assay_temp_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_temp",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".measurement_type_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measurement_type",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".measured_value_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_measured_value",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".details_lbl").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_details",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1}),$(".head.rsrch_data").bt({positions:["bottom","left","top"],ajaxPath:CC_LITE_SESSION_DATA.servicePathPrefix+"/ccmodule_lite/cc_help.html div#rsrch_hdr",ajaxOpts:{dataType:"html"},width:600,centerPointX:.9,spikeLength:20,spikeGirth:10,padding:15,cornerRadius:25,fill:"#FFF",trigger:"hoverIntent",hoverIntentOpts:{interval:150},strokeStyle:"#ABABAB",strokeWidth:1})}function closeWindow(){"Microsoft Internet Explorer"==navigator.appName?(this.focus(),self.opener=this,self.close()):(window.open("","_parent",""),window.close())}function unresolvedGrpsHandler(){var a=0;return $("#rslts td.resolve_status").each(function(){var b=$(this).html();"Mismatch(es) Require Attention"==b?(a+=1,$(this).removeClass("beenrslved")):"OK"!=b&&$(this).addClass("beenrslved")}),a}function getBrowserType(){$.browser.firefox=/firefox/.test(navigator.userAgent.toLowerCase()),$.browser.chrome=/chrom(e|ium)/.test(navigator.userAgent.toLowerCase()),$.browser.msie=/trident/.test(navigator.userAgent.toLowerCase()),$.browser.chrome&&(ChemCompLiteMod.currBrowser="chrome"),$.browser.firefox&&(ChemCompLiteMod.currBrowser="firefox"),$.browser.msie&&(ChemCompLiteMod.currBrowser="msie")}function getLigSummaryRslts(){return $(ChemCompLiteMod.loadSmmryFrmLctr).ajaxSubmit({url:ChemCompLiteMod.URL.GEN_LIG_SMMRY_RSLTS,async:!0,clearForm:!1,success:function(a){checkSummaryStatus(a,ChemCompLiteMod.URL.CHECK_FOR_SMMRY_DATA)}}),!1}function checkSummaryStatus(a,b){function c(a,b,c){checkForRsltsData(a,b,c),"yes"==ChemCompLiteMod.dataAvail&&d()}function d(){return clearInterval(g),$(ChemCompLiteMod.loadSmmryFrmLctr).ajaxSubmit({url:ChemCompLiteMod.URL.LOAD_LIG_SMMRY_DATA,async:!0,clearForm:!1,target:"#rslts",success:function(){$(".savedone").removeAttr("disabled"),applyBeautyTips(),unresolvedGrpsHandler(),$(".instance_browser_ui").removeAttr("disabled")},error:function(){$(".errmsg").html(errStyle+"Failed to load ligand summary data.<br />\n"+ChemCompLiteMod.adminContact).show()}}),!1}try{var e=3,f=3e3;ChemCompLiteMod.dataAvail="no";var g=setInterval(function(){c(a,b,e)},f)}catch(h){$(".errmsg").html(errStyle+"Error on checking for ligand summary data.<br />\n"+ChemCompLiteMod.adminContact).show().delay(5e3).slideUp(800)}}function checkForRsltsData(a,b,c){var d;return $.ajax({type:"GET",url:b,async:!0,cache:!1,data:{semaphore:a.semaphore,sessionid:CC_LITE_SESSION_DATA.sessionID,delay:c},success:function(a){d=a.statuscode,"completed"==d&&(ChemCompLiteMod.dataAvail="yes")},error:function(a){alert("error on call to check for results data")}}),d}function checkMissingLigandTypeField(a){var b=!1;return $("#lgnd_type_"+a+" input[name='lgnd_type']:checked").val()||(b=!0),b?$("#fieldset_lgnd_type_"+a).css({"border-color":"#CD0A0A","background-color":"#FEF1EC","border-style":"solid","border-width":"1px"}):$("#fieldset_lgnd_type_"+a).css({"border-color":"#f6f6f5","background-color":"#FFF","border-style":"groove","border-width":"2px"}),b}function loadInstanceBrowserView(){ChemCompLiteMod.activeCCid=1,$("#ligand_summary_vw").hide(),$("#help_batch_smmry_vw").hide();var a=$("#mismatchlist").html();ChemCompLiteMod.ligIdsMismatched=a.split(",");var b=$("#rslvdlist").html();b&&(ChemCompLiteMod.ligIdsRslvd=b.split(","));var c=$("#ligids").val(),d=$("#ligids_inst_vw").val(),e=$("#ligids_rsrch").val(),f=$("#ligids_rsrch_inst_vw").val();return $("#instnc_browser_container").html().length<=150||d!=c||f!=e?($("#instnc_browser_container").html('<div class="loading_msg">&nbsp;&nbsp;<img src="'+CC_LITE_SESSION_DATA.servicePathPrefix+'"/images/loading.gif" alt="loading..." />&nbsp;&nbsp;Data being processed.</div>'),$("#instnc_brwser_vw").show(),$("#ligids_inst_vw").val(c),$("#ligids_rsrch_inst_vw").val(e),$("#inst_brwsr_frm").ajaxSubmit({url:ChemCompLiteMod.URL.LOAD_INSTNC_BRWSR,async:!0,clearForm:!1,beforeSubmit:function(a,b,c){a.push({name:"browser",value:ChemCompLiteMod.currBrowser})},target:"#instnc_browser_container",success:function(){$("#pagi").paginate({count:$(".tabscount").size(),start:ChemCompLiteMod.activeCCid,display:6,border:!0,border_color:"#BEF8B8",text_color:"#68BA64",background_color:"#E3F2E1",border_hover_color:"#68BA64",text_hover_color:"black",background_hover_color:"#CAE6C6",images:!1,mouse:"press",onChange:function(a){$("._current").removeClass("_current").slideUp("slow"),$("#p"+a).addClass("_current").slideDown("slow"),$("#p_"+a).addClass("_current").slideDown("slow"),$("#p__"+a).addClass("_current").slideDown("slow"),ChemCompLiteMod.activeCCid=a}}),$(".single_instance").hide();var a=$(".cmpnt_grp:first").html();$(".inneraccordion .head."+a+"_hdr:not([class*=all_instances]):not([class*=rsrch_data])").each(function(a){var b=$(this).next().attr("id"),c=$(this).next().attr("name");b.length&&$("#"+c).html().length<100&&$("#"+c).load(b)}),$(".inneraccordion").each(function(a){$(this).find(".single_instance:first").show(),$(this).find("span.ui-icon:first").toggleClass("ui-icon-circle-arrow-s ui-icon-circle-arrow-e")}),$(".inneraccordion div.all_instances").each(function(a){$(this).show(),$(this).parent().find("a.all_instances span.ui-icon").toggleClass("ui-icon-circle-arrow-s ui-icon-circle-arrow-e");var b=$(this).attr("name");checkMissingLigandTypeField(b),checkForUploadedImageFiles(b,"requirementscheck"),checkCompDefFileUploads(b,"refresh")}),$("#restart").click(function(){alert("[PLACEHOLDER] -- will perform restart action")}),$(".savedone").removeAttr("disabled"),$(".instance_browser_ui").removeAttr("disabled"),$(".back_to_summary_vw").removeAttr("disabled"),$(".back_to_summary_vw").show(),$(".instance_browser_ui").hide(),$(document).on("click",".back_to_summary_vw",function(){window.parent.$("div.ui-layout-center.ui-layout-pane.ui-layout-pane-center").animate({scrollTop:0},"slow"),$(".back_to_summary_vw").hide(),$(".instance_browser_ui").show(),$("#instnc_brwser_vw").hide(),$("#help_instnc_brwser_vw").hide(),unresolvedGrpsHandler(),$("#ligand_summary_vw").show(),$("#help_batch_smmry_vw").show(),protectRsrchDataHandler()}),applyBeautyTips(),disableCopyRsrchDscrptr()}}),$("ul.jPag-pages li").each(function(a){var b=$(this).text();ChemCompLiteMod.ligIdsMismatched.indexOf(b)>=0&&$(this).addClass("attn_reqd"),ChemCompLiteMod.ligIdsRslvd&&ChemCompLiteMod.ligIdsRslvd.indexOf(b)>=0&&($(this).addClass("is_rslvd"),$(this).removeClass("attn_reqd"))}),!1):($("#instnc_brwser_vw").show(),$(".back_to_summary_vw").show(),$(".instance_browser_ui").hide(),void 0)}function disableCopyRsrchDscrptr(){$(".copy_rsrch_dscrptr_str").each(function(a){var b=$(this).attr("id"),c=b.split("_"),d=c[5];ChemCompLiteMod.ligIdsMismatched&&ChemCompLiteMod.ligIdsMismatched.indexOf(d)<0&&ChemCompLiteMod.ligIdsRslvd&&ChemCompLiteMod.ligIdsRslvd.indexOf(d)<0&&$(this).attr("disabled","disabled")})}function protectRsrchDataHandler(){for(var a=0;a<ChemCompLiteMod.ligIdsWithRsrchSubmitted.length;a++){var b=ChemCompLiteMod.ligIdsWithRsrchSubmitted[a];$("#"+b+"_rsrch").attr("disabled","disabled")}for(var a=0;a<ChemCompLiteMod.ligIdsMissingRsrch.length;a++){var b=ChemCompLiteMod.ligIdsMissingRsrch[a];$("#"+b+"_rsrch").removeAttr("disabled")}}function disableRsrchDataCntrls(a,b){$(".capture_rsrch_data_input.c_"+a).each(function(){$(this).attr("disabled","disabled")}),revertColorRsrchDataSaveBtn(a)}function enableRsrchDataCntrls(a,b){$(".capture_rsrch_data_input.c_"+a).each(function(){$(this).removeAttr("disabled")}),disableCopyRsrchDscrptr()}function checkForValidInput(a,b,c){var d=!1;return a&&a.length>0&&(d=a.trim().match(ChemCompLiteMod.inputTypeValidation[b])),d||"notify"!==c||alert("Invalid "+ChemCompLiteMod.inputTypeValidation.displaytext[b]+" entered. Please correct."),d}function enableRsrchDataSaveBtn(a){$(".capture_rsrch_data_submit_"+a).removeAttr("disabled"),highlightColorRsrchDataSaveBtn(a)}function revertColorRsrchDataSaveBtn(a){$(".capture_rsrch_data_submit_"+a).css("color","")}function highlightColorRsrchDataSaveBtn(a){$(".capture_rsrch_data_submit_"+a).css("color","red")}function updateResearchList(a,b){$("#hlprfrm_auth_assgnd_grp").val(a),$("#hlprfrm").ajaxSubmit({url:ChemCompLiteMod.URL.UPDATE_RSRCHLST,clearForm:!1,beforeSubmit:function(a,c,d){a.push({name:"mode",value:b})},success:function(){$("#hlprfrm_auth_assgnd_grp").val("")}})}var DEVTEST=!1;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1}),String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b){var c=this;return c.replace(new RegExp(a,"g"),b)}),getLigSummaryRslts(),$(document).on("click","input.savedone",function(){var a=0,b=CC_LITE_SESSION_DATA.fileSource.toLowerCase();if("deposit"==b)$("#hlprfrm").ajaxSubmit({url:ChemCompLiteMod.URL.EXIT_FINISHED,clearForm:!1,beforeSubmit:function(b,c,d){return a=unresolvedGrpsHandler(),a>0?(alert("Ligand processing cannot be completed because one or more ligands require attention. Please address any outstanding mismatches."),!1):void b.push({name:"sessionid",value:CC_LITE_SESSION_DATA.sessionID})},success:function(){alert("Work will be saved and ligand processing now complete."),DEVTEST?$("html").html('TESTING: you can inspect result files/uploads <a href="'+CC_LITE_SESSION_DATA.servicePathPrefix+"/sessions/"+CC_LITE_SESSION_DATA.sessionID+'/results.html">here</a>'):(closeWindow(),$("html").html(""))}});else{if(a=unresolvedGrpsHandler(),a>0)return alert("Ligand processing cannot be completed because one or more ligands require attention. Please address any outstanding mismatches."),!1;alert("Save (Done)"),checkval=0,closeWindow(),$("html").html("")}}),$(document).on("click",".instance_browser_ui",function(){var a,b,c="",d="",e=0;$("#ligand_summary_vw :checkbox:checked:not(#selectall):not(.selectinstnc_rsrch):not(#selectall_rsrch)").each(function(){a=$(this).attr("name"),c+=(c.length>0?",":"")+a,ChemCompLiteMod.ligIdsSlctdForInstcVw.indexOf(a)<0&&ChemCompLiteMod.ligIdsSlctdForInstcVw.push(a)}),$("#ligand_summary_vw :checkbox:checked:not(#selectall):not(.selectinstnc):not(#selectall_rsrch)").each(function(){b=$(this).attr("name").split("_")[0],d+=(d.length>0?",":"")+b}),$("#ligids").val(c),$("#ligids_rsrch").val(d),e=ChemCompLiteMod.ligIdsSlctdForInstcVw.length,e>0?($("#help_instnc_brwser_vw").show(),document.title=CC_LITE_SESSION_DATA.depId+" : Instance Browser View",loadInstanceBrowserView()):alert("Please select at least one entry to submit to Instance Browser View.")}),window.onbeforeunload=function(a){},$(document).on("click","#selectall",function(){$(this).parents("div:eq(0)").find(".selectinstnc").prop("checked",this.checked);var a=this.checked;a||(ChemCompLiteMod.ligIdsSlctdForInstcVw.length=0)}),$(document).on("click",".selectinstnc",function(){var a=$(this).attr("name"),b=this.checked;if(!b){$("#selectall").prop("checked",this.checked);var c=ChemCompLiteMod.ligIdsSlctdForInstcVw.indexOf(a);c>=0&&ChemCompLiteMod.ligIdsSlctdForInstcVw.splice(c,1)}}),$(document).on("click","#selectall_rsrch",function(){var a=this.checked,b="",c="";a?($(this).parents("div:eq(0)").find(".selectinstnc_rsrch").prop("checked",this.checked),$("#ligand_summary_vw :checkbox:checked:not(#selectall):not(.selectinstnc):not(#selectall_rsrch)").each(function(a){thisLigIdRsrch=$(this).attr("name").split("_")[0],c=a>0?",":"",b+=c+thisLigIdRsrch}),updateResearchList(b,"add")):($(this).parents("div:eq(0)").find(".selectinstnc_rsrch:enabled").prop("checked",this.checked),$("#ligand_summary_vw :checkbox:not(:checked):not(#selectall):not(.selectinstnc):not(#selectall_rsrch)").each(function(a){thisLigIdRsrch=$(this).attr("name").split("_")[0],c=a>0?",":"",b+=c+thisLigIdRsrch}),updateResearchList(b,"remove"))}),$(document).on("click",".selectinstnc_rsrch",function(){var a=$(this).attr("name").split("_")[0],b=this.checked;b?updateResearchList(a,"add"):($("#selectall_rsrch").attr("checked",this.checked),updateResearchList(a,"remove"))}),$(document).on("click",".addanother_rsrch",function(a){var b=$(this).attr("id").split("_"),c=b[3],d=b[2],e="#rsrch_data_set_"+d+"_"+parseInt(c)+"_",f=$(e).clone().html(),g=f.replaceAll("_"+parseInt(c)+"_","_"+(parseInt(c)+1)+"_");g="HOH"==d?g.replaceAll("Site - "+(parseInt(c)+1),"Site - "+(parseInt(c)+2)):g.replaceAll("Assay Data - "+(parseInt(c)+1),"Assay Data - "+(parseInt(c)+2)),g=g.replaceAll("displaynone","");var h="rsrch_data_set_"+d+"_"+(parseInt(c)+1)+"_";$(e).after('<div id="'+h+'" class="rsrch_data_set" >'),$("#"+h).append(g),$("#"+h+' input:not([type="button"])').val(""),$("#"+h+" select").val(""),$("#"+h+" textarea").val(""),$("#"+h+" .disabled_2").attr("disabled","disabled"),$("#"+h+" .disabled_3").attr("disabled","disabled"),$("#"+h+" .disabled_4").attr("disabled","disabled"),$("#binding_dataset_actions_"+d+"_"+parseInt(c)+"_").hide(),3==parseInt(c)&&$("#addanother_rsrch_"+d+"_"+(parseInt(c)+1)+"_").hide(),applyBeautyTips()}),$(document).on("click",".deletethis_rsrch",function(a){var b=$(this).attr("id").split("_"),c=b[3],d=b[2],e="#rsrch_data_set_"+d+"_"+parseInt(c)+"_";$(e).remove(),$("#binding_dataset_actions_"+d+"_"+(parseInt(c)-1)+"_").show(),c>1&&$("#deletethis_rsrch_"+d+"_"+(parseInt(c)-1)+"_").show()}),$(document).on("click",".copy_rsrch_dscrptr_str",function(a){var b=$(this).attr("id").split("_"),c=b[6],d=b[5],e=!0,f=$("#dscrptr_type_"+d).val(),g=$("#dscrptr_str_"+d).val().trim();if(0==g.length&&(alert("Descriptor string not provided in Ligand Verification section."),e=!1),e){var h="#rsrch_dscrptr_type_"+d+"_"+parseInt(c)+"_",i="#rsrch_dscrptr_str_"+d+"_"+parseInt(c)+"_";$(h).val(f),$(i).val(g),$(i).removeAttr("disabled")}}),$(document).on("change",".capture_rsrch_data_input.assay_type",function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-3],f=d[d.length-2];c.split("_"+e+"_"+f+"_")[0];b&&b.length>0&&$("#rsrch_data_set_"+e+"_"+f+"_ .disabled_2").removeAttr("disabled")}),$(document).on("change",".capture_rsrch_data_input.dscrptr_type",function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-3],f=d[d.length-2];c.split("_"+e+"_"+f+"_")[0];if(b&&b.length>1){$("#rsrch_dscrptr_str_"+e+"_"+f+"_").removeAttr("disabled"),$("#"+c+" option:eq(0)").attr("disabled","disabled");var g=$("#rsrch_dscrptr_str_"+e+"_"+f+"_").val().trim();if(g&&g.length>0){checkForValidInput(g,b,"notify")}}}),$(document).on("change",".capture_rsrch_data_input.measurement_type",function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-3],f=d[d.length-2];c.split("_"+e+"_"+f+"_")[0];if(b&&b.length>1){$("#measured_value_"+e+"_"+f+"_").removeAttr("disabled"),$("#"+c+" option:eq(0)").attr("disabled","disabled");var g=$("#measured_value_"+e+"_"+f+"_").val().trim();if(g&&g.length>0){checkForValidInput(g,"measured_value","notify")}}}),$(document).on("keyup",".capture_rsrch_data_input.measured_value",function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-3],f=d[d.length-2];c.split("_"+e+"_"+f+"_")[0];b&&b.length>0&&($("#rsrch_data_set_"+e+"_"+f+"_ .disabled_3").removeAttr("disabled"),disableCopyRsrchDscrptr())}),$(document).on("blur",'.capture_rsrch_data_input:not(.rsrch_dscrptr_str):not([type="button"])',function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-3],f=d[d.length-2],g=c.split("_"+e+"_"+f+"_")[0];if(b&&b.length>0){var h=checkForValidInput(b,g,"notify");h&&enableRsrchDataSaveBtn(e)}else"measured_value"==g&&$("#measurement_type_"+e+"_"+f+"_ option:eq(0)").removeAttr("disabled")}),$(document).on("blur",".capture_rsrch_data_input.rsrch_dscrptr_str",function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[3],f=d[4],g=$("#rsrch_dscrptr_type_"+e+"_"+f+"_").val();if(b&&b.length>0){var h=checkForValidInput(b,g,"notify");h&&enableRsrchDataSaveBtn(e)}else $("#rsrch_dscrptr_type_"+e+"_"+f+"_ option:eq(0)").removeAttr("disabled")}),$(document).on("click",".save_rsrch_data",function(){var a=$(this).attr("value"),b=($(this),$(this).attr("name")),c="span.datasubmitted_status."+b,d="span.no_datasubmitted_status."+b,e="#capture_rsrch_data_frm_"+b,f=function(){$("#rsrch_mode_"+b).val("done"),"HOH"!=b?($("#"+b+"_capture_rsrch_data .save_rsrch_data").val("Edit Ligand Binding Data"),$(c).show(),$(d).hide()):$("#"+b+"_capture_rsrch_data .save_rsrch_data").val("Edit"),$(e).ajaxSubmit({url:ChemCompLiteMod.URL.SAVE_RSRCH_DATA,async:!0,clearForm:!1,success:function(){disableRsrchDataCntrls(b,"done"),applyRsrchAcqdStatusHighlight(b),ChemCompLiteMod.ligIdsWithRsrchSubmitted.push(b);var a=ChemCompLiteMod.ligIdsMissingRsrch.indexOf(b);a>=0&&ChemCompLiteMod.ligIdsMissingRsrch.splice(a,1),protectRsrchDataHandler()}})},g=function(){$("#rsrch_mode_"+b).val("undo"),$(c).hide(),$(d).show(),"HOH"!=b?$("#"+b+"_capture_rsrch_data .save_rsrch_data").val("Save Ligand Binding Data"):$("#"+b+"_capture_rsrch_data .save_rsrch_data").val("Save"),$(e).ajaxSubmit({url:ChemCompLiteMod.URL.SAVE_RSRCH_DATA,async:!0,clearForm:!1,success:function(){enableRsrchDataCntrls(b,"undo"),applyRsrchAcqdStatusHighlight(b),highlightColorRsrchDataSaveBtn(b),ChemCompLiteMod.ligIdsMissingRsrch.push(b);var a=ChemCompLiteMod.ligIdsWithRsrchSubmitted.indexOf(b);a>=0&&ChemCompLiteMod.ligIdsWithRsrchSubmitted.splice(a,1),protectRsrchDataHandler()}})};if(a.indexOf("Save")>=0){var h=!0,i=!0,j="HOH"!=b?':not([type="button"])':'[type="text"]',k=new Object;$(".c_"+b+".capture_rsrch_data_input"+j).each(function(a){var c=$(this).val(),d=$(this).attr("id"),e=d.split("_"),f=e[e.length-2],g=d.split("_"+b+"_"+f+"_")[0];k.hasOwnProperty(f)||(k[f]=new Object,k[f].notEmpty=!1,k[f].validData=!0,"HOH"!=b&&(k[f].countOfEmptyMeasurementGrpItems=0,k[f].dscrptrMissing=!1,k[f].dscrptrTypeMissing=!1,k[f].haveAssayType=!0)),c&&c.trim().length>=1&&c!==b?k[f].notEmpty=!0:"assay_type"==g&&(k[f].haveAssayType=!1)}),"HOH"!=b&&$(".c_"+b+".capture_rsrch_data_input.measurement_grp").each(function(a){var b=$(this).val(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-2];b&&b.length>=1||(k[e].countOfEmptyMeasurementGrpItems+=1)}),$(".c_"+b+'.capture_rsrch_data_input:not(.rsrch_dscrptr_str):not([type="button"]):not(select)').each(function(a){var b=$(this).val(),c=$(this).attr("id"),d=c.split("_"),e=d[d.length-3],f=d[d.length-2],g=c.split("_"+e+"_"+f+"_")[0];if(b&&b.trim().length>0){var h=checkForValidInput(b,g,"onglobalsave");h||(k[f].validData=!1)}}),$(".c_"+b+".capture_rsrch_data_input.rsrch_dscrptr_str").each(function(a){var b=$(this).val().trim(),c=$(this).attr("id"),d=c.split("_"),e=d[3],f=d[4],g=$("#rsrch_dscrptr_type_"+e+"_"+f+"_").val();if(b&&b.length>0)if(g){var h=checkForValidInput(b,g,"onglobalsave");h||(k[f].validData=!1)}else k[f].dscrptrTypeMissing=!0;else g&&g.length>0&&(k[f].dscrptrMissing=!0)});for(index in k)k[index].notEmpty?"HOH"==b||k[index].haveAssayType||(i=!1,alert("Cannot submit dataset without specifying the assay type. Please check content in dataset #"+(parseInt(index)+1))):(i=!1,alert("Cannot submit an empty dataset. Please check content in dataset #"+(parseInt(index)+1))),i&&(k[index].validData||(i=!1,alert("Still have input that requires correction. Please check dataset #"+(parseInt(index)+1)))),i&&"HOH"!=b&&(k[index].countOfEmptyMeasurementGrpItems>0&&(i=!1,alert("Measurement type and measured value must both be provided. Please check dataset #"+(parseInt(index)+1))),k[index].dscrptrMissing&&(i=!1,alert("Descriptor type is specified but corresponding string is missing. Please check dataset #"+(parseInt(index)+1))),k[index].dscrptrTypeMissing&&(i=!1,alert("Descriptor string is provided but corresponding descriptor type is missing. Please check dataset #"+(parseInt(index)+1))));h=!1,h?alert("One of the required fields is missing."):i&&f()}else g()});